!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@onflow/config"),require("@onflow/types"),require("@onflow/fcl")):"function"==typeof define&&define.amd?define(["exports","@onflow/config","@onflow/types","@onflow/fcl"],t):t((n||self).flowCadut={},n.config,n.t,n.fcl)}(this,function(n,t,r,e){function o(n){if(n&&n.i)return n;var t=Object.create(null);return n&&Object.keys(n).forEach(function(r){if("default"!==r){var e=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,e.get?e:{enumerable:!0,get:function(){return n[r]}})}}),t.default=n,t}var c=o(r),i=o(e);const s={emulator:{FlowToken:"0xee82856bf20e2aa6",FungibleToken:"0x0ae53cb6e3f42a79"},testnet:{FlowToken:"0x7e60df042a9c0868",FungibleToken:"0x9a0766d93b6608b7",LockedTokens:"0x95e019a17d0e23d7",StakingProxy:"0x7aad92e5a0715d21",FUSD:"0xe223d8a629e49c68"},mainnet:{FlowToken:"0x1654653399040a61",FungibleToken:"0xf233dcee88fe0abe",LockedTokens:"0x8d0e87b65159ae63",StakingProxy:"0x62430cf28c26d095",FUSD:"0x3c5959b568896393"}},u={mainnet:"https://access-mainnet-beta.onflow.org",testnet:"https://access-testnet.onflow.org",emulator:"http://localhost:8080"},a=function(){try{return Promise.resolve(function(){try{return Promise.resolve(t.config().get("ix.env")).then(function(n){return n||"emulator"})}catch(n){return Promise.reject(n)}}()).then(function(n){return s[n]||s.emulator})}catch(n){return Promise.reject(n)}},f=n=>n.split(/\s/).map(n=>n.replace(/\s/g,"")).filter(n=>n.length>0&&"import"!==n&&"from"!==n),l=(n,t)=>{const[r,e]=t;return n[r]=e,n},d=n=>n&&0!==n.length?n.split("\n").filter(n=>n.includes("import")).map(f).reduce(l,{}):{},m=(n,t={})=>{const r=d(n),e=[];for(const n in r)!t[n]&&Object.prototype.hasOwnProperty.call(r,n)&&e.push(n);return e},p=(n=[],t="")=>{const r="Missing imports for contracts:";console.error(t?`${t} ${r}`:r,n)},h=/(\s*import\s*)([\w\d]+)(\s+from\s*)([\w\d".\\/]+)/g,g=(n,t,r=!0)=>n.replace(h,(n,e,o,c,i)=>{const s=r?o:i;return`${e}${o} from ${(t instanceof Function?t(s):t[s])||i}`}),w=["public","private","storage"],P=n=>{const[t]=n.split("");return t.toUpperCase()+n.slice(1)},y=n=>{switch(!0){case n.indexOf("//")>=0:return"//";case n.indexOf("/")>=0:return"/";case n.indexOf("\\")>=0:return"\\";default:return""}},x=n=>n.replace(/\s+/g," "),v="contract",b="transaction",$="script",S=n=>n.split(",").map(n=>n.replace(/\s*/g,"")).filter(n=>""!==n),k=n=>n.replace(/(\/\*[\s\S]*?\*\/)|(\/\/.*)/g,""),E=(n,t)=>{const r=k(n),e=x(r.replace(/[\n\r]/g,""));if(e){const n=new RegExp(t,"g").exec(e);if(n)return""===n[1]?[]:S(n[1])}return[]},F=n=>E(n,"(?:prepare\\s*\\(\\s*)([^\\)]*)(?:\\))"),T=n=>E(n,"(?:fun\\s+main\\s*\\(\\s*)([^\\)]*)(?:\\))"),I=n=>E(n,"(?:transaction\\s*\\(\\s*)([^\\)]*)(?:\\))"),A=n=>{const t=k(n).replace(/(resource|struct)\s+\w+\s*{[\s\S]+?}/g,""),r=/(?:access\(\w+\)|pub)\s+contract\s+(?:interface)*\s*(\w*)(\s*{[.\s\S]*init\s*\((.*?)\)[.\s\S]*})?/g.exec(t);if(r.length<2)throw new Error("Contract Error: can't find name of the contract");return{contractName:r[1],args:r[3]||""}},N=n=>{const t=k(n);if(/transaction\s*(\(\s*\))*\s*/g.test(t)){const n=F(t),r=I(t);return{type:b,signers:n.length,args:r}}if(/pub\s+fun\s+main\s*/g.test(t)){const n=T(t);return{type:$,args:n}}if(/\w+\s+contract\s+(\w*\s*)\w*/g.test(t)){const{contractName:n,args:r}=A(t);return{type:v,signers:1,args:r,contractName:n}}return{type:"unknown"}},j=n=>!n||"string"!=typeof n,O=n=>!j(n)&&(n.startsWith("Int")||n.startsWith("UInt")||n.startsWith("Word")),U=n=>{if(j(n))return!1;const t=n.replace(/\s/g,"");return t.startsWith("[")&&t.endsWith("]")},L=n=>{if(j(n))return!1;const t=n.replace(/\s/g,"");return t.startsWith("{")&&t.endsWith("}")},M=n=>U(n)||L(n);function _(n,t,r){if(!n.s){if(r instanceof q){if(!r.s)return void(r.o=_.bind(null,n,t));1&t&&(t=r.s),r=r.v}if(r&&r.then)return void r.then(_.bind(null,n,t),_.bind(null,n,2));n.s=t,n.v=r;const e=n.o;e&&e(n)}}const q=function(){function n(){}return n.prototype.then=function(t,r){const e=new n,o=this.s;if(o){const n=1&o?t:r;if(n){try{_(e,1,n(this.v))}catch(n){_(e,2,n)}return e}return this}return this.o=function(n){try{const o=n.v;1&n.s?_(e,1,t?t(o):o):r?_(e,1,r(o)):_(e,2,o)}catch(n){_(e,2,n)}},e},n}(),C={ARGUMENT:"argument"},D=function(n){try{return Promise.resolve(e.config().get("ix.plugins")).then(function(t){const r=(t||{})[n];return!!(r&&r.length>0)&&r})}catch(n){return Promise.reject(n)}};function R(n,t,r){if(!n.s){if(r instanceof B){if(!r.s)return void(r.o=R.bind(null,n,t));1&t&&(t=r.s),r=r.v}if(r&&r.then)return void r.then(R.bind(null,n,t),R.bind(null,n,2));n.s=t,n.v=r;const e=n.o;e&&e(n)}}const B=function(){function n(){}return n.prototype.then=function(t,r){const e=new n,o=this.s;if(o){const n=1&o?t:r;if(n){try{R(e,1,n(this.v))}catch(n){R(e,2,n)}return e}return this}return this.o=function(n){try{const o=n.v;1&n.s?R(e,1,t?t(o):o):r?R(e,1,r(o)):R(e,2,o)}catch(n){R(e,2,n)}},e},n}(),H=n=>n.split(/(\w+)\s*:\s*([\w{}[\]:\s?]*)/).filter(n=>""!==n).map(n=>n.replace(/\s*/g,"")),z=n=>H(n)[1],G=n=>/{(.*)}/.exec(n)[1].split(/([^:]*):(.*)/).map(n=>n.replace(/\s/g,"")).filter(n=>n),W=n=>/\[(.*)\]/.exec(n)[1].replace(/\s+/g,""),J=n=>!j(n)&&(n.includes("?")?c.Optional(c[(n=>n.slice(0,-1))(n)]):c[n]),K=n=>{if(M(n))switch(!0){case U(n):{const t=W(n);return c.Array(K(t))}case L(n):{const[t,r]=G(n),e={key:K(t),value:K(r)};return c.Dictionary(e)}default:return J(n)}return J(n)},Q=function(n,t){try{return Promise.resolve(D(C.ARGUMENT)).then(function(r){function e(){let n;const t=K(c);switch(!0){case(n=>{if(j(n))return!1;let t=n.endsWith("?")?n.slice(0,-1):n;return O(t)||(n=>"String"===n)(t)||(n=>"Character"===n)(t)||(n=>"Bool"===n)(t)})(c):return i.arg(o,t);case(n=>!j(n)&&(n.startsWith("Fix64")||n.startsWith("UFix64")))(c):return null===o?i.arg(null,t):(isNaN(parseFloat(o))&&(n=>{throw new Error("Type Error: Expected proper value for fixed type")})(),i.arg(parseFloat(o).toFixed(8),t));case(n=>"Address"===n||"Address?"===n)(c):{const n=null==(d=o)?null:"0x"+(n=>null==n?null:n.replace(/^0x/,""))(d);return i.arg(n,t)}case(n=>"Path"===n||"Path?"===n)(c):return i.arg((n=>{if(n.startsWith("/")){const t=n.slice(1).split("/");if(2!==t.length)throw Error("Incorrect Path - identifier missing");if(!w.includes(t[0]))throw Error("Incorrect Path - wrong domain");const[r,e]=t;return{domain:r,identifier:e}}throw Error("Incorrect Path - shall start with `/`")})(o),t);case U(c):{function r(r){return n?r:i.arg(o,t)}const e=W(c),s=function(){if(M(e))return Promise.resolve(Promise.all(o.map(function(n){try{return Promise.resolve(Q(e,n)).then(function({value:n}){return n})}catch(n){return Promise.reject(n)}}))).then(function(r){return n=1,i.arg(r,t)})}();return s&&s.then?s.then(r):r(s)}case L(c):{function e(){return i.arg(d,t)}const[n,r]=G(c),d=[],m=Object.keys(o),p=(s=m,u=function(t){function e(){const t=O(n)?parseInt(c):c;d.push({key:t,value:i})}const c=m[t];let i;const s=function(){if(M(r))return Promise.resolve(Q(r,o[c])).then(function(n){i=n.value});i=o[c]}();return s&&s.then?s.then(e):e()},l=-1,function n(t){try{for(;++l<s.length;)if((t=u(l))&&t.then){if(!((r=t)instanceof B&&1&r.s))return void t.then(n,f||(f=R.bind(null,a=new B,2)));t=t.v}a?R(a,1,t):a=t}catch(n){R(a||(a=new B),2,n)}var r}(),a);return p&&p.then?p.then(e):e()}default:throw`${c} is not supported`}var s,u,a,f,l,d}let o=t,c=n;const s=function(){if(r)return Promise.resolve(function(n,t){try{function r(){return{type:u,value:a}}let u=n.type,a=n.value;const f=(e=t,o=function(n){const{resolver:r}=t[n];return Promise.resolve(r(u,a)).then(function(n){u=n.type,a=n.value})},s=-1,function n(t){try{for(;++s<e.length;)if((t=o(s))&&t.then){if(!((r=t)instanceof q&&1&r.s))return void t.then(n,i||(i=_.bind(null,c=new q,2)));t=t.v}c?_(c,1,t):c=t}catch(n){_(c||(c=new q),2,n)}var r}(),c);return Promise.resolve(f&&f.then?f.then(r):r())}catch(n){return Promise.reject(n)}var e,o,c,i,s}({type:n,value:t},r)).then(function(n){o=n.value,c=n.type})}();return s&&s.then?s.then(e):e()})}catch(n){return Promise.reject(n)}},V=function(n=[],t){try{if(n.length>t.length)throw new Error("Not enough arguments");return Promise.all(t.map(function(t,r){try{return Promise.resolve(Q(n[r],t)).then(function(n){var t;return(t=n).xform.asArgument(t.value),n})}catch(n){return Promise.reject(n)}}))}catch(n){return Promise.reject(n)}},X=function(n,t=[]){try{const r=N(n).args.map(z);return V(r,t)}catch(n){return Promise.reject(n)}},Y=function(n,t){try{if(0===n.length)return Promise.resolve([]);const r=n[0];return Array.isArray(r)&&r.length>0&&r[r.length-1].asArgument?Promise.resolve((n=>n.reduce((n,t)=>[...n,...((n,t)=>{const r=n[n.length-1];return n.slice(0,-1).map(n=>((n,t)=>i.arg(n,t))(n,r))})(t)],[]))(n)):X(t,n)}catch(n){return Promise.reject(n)}};function Z(n,t){try{var r=n()}catch(n){return t(n)}return r&&r.then?r.then(void 0,t):r}const nn=function(n,r){try{const{code:e,cadence:o,args:c,addressMap:s,limit:u,processed:f}=n,l=e||o;return Promise.resolve(a()).then(function(o){function a(){return Promise.resolve(t.config().get("ix.executionLimit")).then(function(t){if(p.push(i.limit(u||t||100)),"transaction"===r){const{proposer:t,payer:r,signers:e=[]}=n,o=0===e.length?[r]:e,c=t||r;p.push(i.payer(r)),p.push(i.proposer(c)),p.push(i.authorizations(o))}return i.send(p)})}const d={...o,...s},m=f?l:g(l,d),p="script"===r?[i.script(m)]:[i.transaction(m)],h=function(){if(c)return Promise.resolve(Y(c,e)).then(function(n){p.push(i.args(n))})}();return h&&h.then?h.then(a):a()})}catch(n){return Promise.reject(n)}},tn=function(n){const{raw:t=!1}=n;return Promise.resolve(Z(function(){return Promise.resolve(nn(n,"script")).then(function(n){return t?[n.encodedData,null]:Promise.resolve(i.decode(n)).then(function(n){return[n,null]})})},function(n){return[null,n]}))},rn=function(n){const{wait:t="seal"}=n;return Promise.resolve(Z(function(){return Promise.resolve(nn(n,"transaction")).then(function(n){let r;function e(t){return r?t:[n.transactionId,null]}const o=function(){if(t){const e=(n=>{if("string"==typeof n){const t=n.toLowerCase();if(t.includes("final"))return"onceFinalized";if(t.includes("exec"))return"onceExecuted";if(t.includes("seal"))return"onceSealed"}return console.log(`⚠️ [33mStatus value [1m[35m"${n}"[33m[2m is not supported. Reverting to [32m"onceSealed"[0m`),"onceSealed"})(t);return Promise.resolve(i.tx(n)[e]()).then(function(t){const e={txId:n,...t};return r=1,[e,null]})}}();return o&&o.then?o.then(e):e(o)})},function(n){return[null,n]}))},en=function(n){try{const{name:t,to:r,payer:e,proposer:o,code:c,update:i=!1,processed:s=!1,addressMap:u={}}=n,a=s?c:g(c,u),f=i?"\n    transaction(name: String, code: String) {\n      prepare(acct: AuthAccount){\n        let decoded = code.decodeHex()\n        \n        acct.contracts.add(\n          name: name,\n          code: decoded,\n        )\n      }\n    }\n  ":"\n  transaction(name: String, code: String){\n    prepare(acct: AuthAccount){\n      let decoded = code.decodeHex()\n      \n      if acct.contracts.get(name: name) == nil {\n        acct.contracts.add(name: name, code: decoded)\n      } else {\n        acct.contracts.update__experimental(name: name, code: decoded)\n      }\n    }\n  }\n",l=Buffer.from(a,"utf8").toString("hex");let d=r,m=r;return e&&(m=e,d=o||e),rn({payer:m,proposer:d,signers:[r],code:f,args:[t,l]})}catch(n){return Promise.reject(n)}};n.CONTRACT=v,n.PLUGIN_TYPES=C,n.SCRIPT=$,n.TRANSACTION=b,n.argType=z,n.capitalizeFirstLetter=P,n.collapseSpaces=x,n.deployContract=en,n.executeScript=tn,n.extract=E,n.extractContractName=n=>{const t=k(n).replace(/\r\n|\n|\r/g," "),r=/\w+\s+contract\s+(?:interface)*\s*(\w*)/g.exec(t);if(r.length<2)throw new Error("Contract Error: can't find name of the contract");return r[1]},n.extractContractParameters=A,n.extractImports=d,n.extractScriptArguments=T,n.extractSigners=F,n.extractTransactionArguments=I,n.generateSchema=S,n.getArrayType=W,n.getDictionaryTypes=G,n.getEnvironment=a,n.getPlugins=D,n.getSplitCharacter=y,n.getTemplateInfo=N,n.mapArgument=Q,n.mapArguments=V,n.mapValuesToCode=X,n.missingImports=m,n.mutate=rn,n.query=tn,n.registerPlugin=function(n){try{const{type:t}=n;return Promise.resolve(e.config().get("ix.plugins")).then(function(r){const o=r||{},c=o[t]||[];return Promise.resolve(e.config().put("ix.plugins",{...o,[t]:[...c,n]})).then(function(){})})}catch(n){return Promise.reject(n)}},n.replaceImportAddresses=g,n.report=p,n.reportArguments=(n,t,r="")=>{if(t>n){const e=`Incorrect number of arguments: found ${n} of ${t}`;console.error(r?`${r} ${e}`:e)}},n.reportMissing=(n="items",t,r,e="")=>{if(r!==t){const o=`Incorrect number of ${n}: found ${t} of ${r}`;console.error(e?`${e} ${o}`:o)}},n.reportMissingImports=(n,t,r="")=>{const e=m(n,t);e.length>0&&p(e,r)},n.resolveArguments=Y,n.sendTransaction=rn,n.setEnvironment=function(n="emulator",r={}){try{const e=n.toLowerCase();if(!s[e])throw new Error(`Provided value "${e}" is not supported. Try "emulator", "testnet" or "mainnet". Default: "emulator"`);const{port:o,endpoint:c,limit:i}=r,a="emulator"===e&&o?`http://localhost:${o}`:u[e],f=c||a;return Promise.resolve(t.config().put("ix.env",e)).then(function(){function n(){return Promise.resolve(t.config().put("accessNode.api",f)).then(function(){})}const r=function(){if(i)return Promise.resolve(t.config().put("ix.executionLimit",i)).then(function(){})}();return r&&r.then?r.then(n):n()})}catch(n){return Promise.reject(n)}},n.splitArgs=H,n.trimAndSplit=(n,t,r)=>r?n.replace(t,"").split(r):n.replace(t,"").split(y(n)),n.underscoreToCamelCase=n=>n.replace(/-/g,"_").split("_").map((n,t)=>t>0?P(n):n).join(""),n.updateContract=function(n){try{return en({...n,update:!0})}catch(n){return Promise.reject(n)}}});
//# sourceMappingURL=main.umd.js.map
